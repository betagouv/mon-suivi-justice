  <% if @convicts.length > 0 %>
  <div class="fr-table fr-table--bordered">
    <table>
      <caption>Résultats de la recherche</caption>
      <thead>
        <tr>
          <th scope="col"><%= t('activerecord.attributes.convict.first_name') %></th>
          <th scope="col"><%= t('activerecord.attributes.convict.last_name') %></th>
          <th scope="col"><%= t('activerecord.attributes.convict.appi_uuid') %></th>
          <th scope="col"><%= t('activerecord.attributes.convict.phone') %></th>
          <th scope="col"><%= t('activerecord.attributes.convict.cpip') %></th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @convicts.each do |convict| %>
          <tr>
            <td><%= convict.first_name %></td>
            <td><%= convict.last_name %></td>
            <td><%= convict.appi_uuid %></td>
            <td><%= convict.display_phone %></td>
            <td>
              <% if convict.cpip.present? %>
                <div class="fr-grid-row fr-grid-row--center">
                  <%= convict.cpip_name %>
                  <% if policy(convict).unassign? %>
                    <%= button_to convict_unassign_path(convict), data: { 'turbo-confirm': t('basic_confirmation') } do %>
                      <span class="fr-icon-close-line" aria-hidden="true"></span>
                    <% end %>
                  <% end %>
                </div>
              <% elsif policy(convict).self_assign? %>
                <%= link_to t('.self_assign_link'), convict_self_assign_path(convict), class: 'index-control', data: { 'turbo-method': :post } %>
              <% end %>
            </td>
            <td>
              <% if policy(convict).show? %>
                <%= link_to t('show_convict'), convict_path(convict), class: 'index-control' %>
              <% end %>
              <% if policy(convict).edit? %>
                <%= link_to t('edit'), edit_convict_path(convict), class: 'index-control' %>
              <% end %>
              <% if policy(convict).archive? %>
                <%= link_to t('archive'), convict_archive_path(convict),
                                                                     data: { 'turbo-confirm': t('archive_convict_confirmation'), "turbo_method": :delete },
                                                                     class: 'index-control' %>
              <% end %>
              <% if policy(convict).unarchive? %>
                <%= link_to t('unarchive'), convict_unarchive_path(convict), data: { "turbo_method": :post }, class: 'index-control' %>
              <% end %>
              <% if policy(convict).destroy? %>
                <%= link_to t('delete'), convict_path(convict), class: 'index-control',
                                                            data: { 'turbo-confirm': t('basic_confirmation'), "turbo_method": :delete }
                                                            %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <p>Aucun résultat trouvé</p>
<% end %>
